<?xml version="1.0"?>
<!DOCTYPE mycat:schema SYSTEM "schema.dtd">
<mycat:schema xmlns:mycat="http://io.mycat/">
    <!-- ==================== -->
    <!--     MyCat的逻辑库    -->
    <!-- ==================== -->
    <!-- 数据库配置，与server.xml中的数据库对应 -->
    <schema name="mycat_ds" checkSQLschema="false" sqlMaxLimit="100">
        <table name="USER_BASE" dataNode="d_node0" subTables="USER_BASE_$0-3" rule="user_base_sharding"/>
        <!--
        <table name="ORDER_BASE" primaryKey="ID" type="global" dataNode="data_node1" />
        <table name="ORDER_ITME" primaryKey="ID" type="global" dataNode="data_node1" />
        -->
    </schema>
    <!-- ==================== -->
    <!--        数据节点      -->
    <!-- ==================== -->
    <!-- 分片配置 -->
    <dataNode name="d_node0" dataHost="d_host0" database="ds_sharding"/>
    <dataNode name="d_node1" dataHost="d_host1" database="ds_sharding"/>
    <!-- ==================== -->
    <!--      数据主机         -->
    <!-- ==================== -->
    <!--   banlance：读写分离  -->
    <!--  writeType：         -->
    <!-- switchType：主从切换  -->
    <!-- 物理数据库配置 -->
    <dataHost name="d_host0" maxCon="1000" minCon="10" balance="0" switchType="1" writeType="0"
              dbType="mysql" dbDriver="native" slaveThreshold="100">
        <heartbeat>select user();</heartbeat>
        <writeHost host="host_master" url="127.0.0.1:3306" user="root" password="123123">
            <!--<readHost host="host_slave0" url="127.0.0.1:3307" user="root" password="123123" />-->
        </writeHost>
    </dataHost>
    <dataHost name="d_host1" maxCon="1000" minCon="10" balance="0" switchType="1" writeType="0"
              dbType="mysql" dbDriver="native" slaveThreshold="100">
        <heartbeat>select user();</heartbeat>
        <writeHost host="host_master" url="127.0.0.1:3307" user="root" password="123123">
            <!--<readHost host="host_slave0" url="127.0.0.1:3307" user="root" password="123123" />-->
        </writeHost>
    </dataHost>
</mycat:schema>